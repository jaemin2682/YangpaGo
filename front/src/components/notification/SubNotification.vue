<template>
  <div class="sub-notification" @click="moveUrl">
    <div class="badge">
      <svg
        v-if="data.type == 1 || data.type == 4"
        class="badge-icon like"
        viewBox="0 0 512 512"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <path
          d="m512 256c0 141.386719-114.613281 256-256 256s-256-114.613281-256-256 114.613281-256 256-256 256 114.613281 256 256zm0 0"
          fill="url(#a)"
        />
        <g fill="#fff">
          <path
            d="m256 390.183594c-2.234375 0-4.46875-.5-6.53125-1.5-59.773438-28.917969-105.488281-61.585938-135.886719-97.085938-27.855469-32.539062-42.582031-67.765625-42.582031-101.871094 
        0-28.359374 9.726562-54.996093 27.386719-75 18.628906-21.101562 44.417969-32.726562 72.613281-32.726562 41.777344 0 70.097656 19.960938 85 34.222656 
        14.902344-14.261718 43.222656-34.222656 85-34.222656 28.195312 0 53.984375 11.621094 72.613281 32.726562 17.660157 20.003907 27.386719 46.640626 27.386719 75 0 
        34.105469-14.726562 69.332032-42.582031 101.871094-30.398438 35.5-76.113281 68.164063-135.886719 97.085938-2.0625 1-4.296875 1.5-6.53125 
        1.5zm-85-278.183594c-39.90625 0-70 33.414062-70 77.726562 0 27.234376 11.898438 54.945313 35.371094 82.359376 26.605468 31.070312 66.828125 60.113281 
        119.628906 86.386718 52.800781-26.273437 93.023438-55.316406 119.628906-86.386718 23.472656-27.414063 35.371094-55.125 35.371094-82.359376 
        0-44.3125-30.09375-77.726562-70-77.726562-47.398438 0-71.660156 33.828125-72.667969 35.265625-2.796875 4.085937-7.40625 6.496094-12.355469 6.496094-4.929687 
        0-9.515624-2.453125-12.316406-6.507813-1.140625-1.621094-25.394531-35.253906-72.660156-35.253906zm0 0"
          />
        </g>
      </svg>
      <svg
        v-if="data.type == 16"
        class="badge-icon follow"
        viewBox="0 0 512 512"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <path
          d="m512 256c0 141.386719-114.613281 256-256 256s-256-114.613281-256-256 114.613281-256 256-256 256 114.613281 256 256zm0 0"
          fill="url(#a)"
        />
        <g fill="#fff">
          <path
            d="m310.304688 239.976562c20.199218-16.421874 33.132812-41.453124 33.132812-69.457031 
          0-49.335937-40.140625-89.476562-89.480469-89.476562-49.335937 0-89.476562 40.140625-89.476562 89.476562 0 28.003907 12.929687 
          53.035157 33.132812 69.457031-62.734375 23.027344-107.613281 83.363282-107.613281 153.980469 0 3.976563 1.582031 7.792969 4.394531 
          10.605469s6.628907 4.394531 10.605469 4.394531h297.914062c8.285157 0 15-6.714843 15-15 
          0-70.617187-44.875-130.953125-107.609374-153.980469zm-115.824219-69.457031c0-32.796875 26.679687-59.476562 
          59.476562-59.476562s59.480469 26.679687 59.480469 59.476562-26.683594 59.480469-59.480469 
          59.480469-59.476562-26.683594-59.476562-59.480469zm-73.644531 208.4375c7.480468-66.828125 64.328124-118.957031 
          133.121093-118.957031s125.644531 52.128906 133.125 118.957031zm0 0"
          />
          <path
            d="m429 155.519531h-11.085938v-11.082031c0-8.285156-6.714843-15-15-15-8.28125 0-15 6.714844-15 15v11.082031h-11.082031c-8.285156 
          0-15 6.71875-15 15 0 8.285157 6.714844 15 15 15h11.082031v11.085938c0 8.285156 6.71875 15 15 15 8.285157 0 
          15-6.714844 15-15v-11.085938h11.085938c8.285156 0 15-6.714843 15-15 0-8.28125-6.714844-15-15-15zm0 0"
          />
        </g>
      </svg>
      <svg
        v-if="data.type == 2 || data.type == 8"
        class="badge-icon comment"
        viewBox="0 0 512 512"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <path
          d="m512 256c0 141.386719-114.613281 256-256 256s-256-114.613281-256-256 114.613281-256 256-256 256 114.613281 256 256zm0 0"
          fill="url(#a)"
        />
        <g fill="#fff">
          <path
            d="m256 458c-5.144531 0-9.933594-2.636719-12.683594-6.988281l-28.535156-45.179688h-120.78125c-8.285156 0-15-6.714843-15-15v-271.832031c0-8.28125 
        6.714844-15 15-15h324c8.285156 0 15 6.71875 15 15v271.832031c0 8.285157-6.714844 15-15 15h-120.78125l-28.535156 45.179688c-2.75 4.351562-7.539063 
        6.988281-12.683594 6.988281zm-147-82.167969h114.050781c5.144531 0 9.933594 2.640625 12.683594 6.988281l20.265625 32.089844 20.265625-32.089844c2.75-4.351562 
        7.539063-6.988281 12.683594-6.988281h114.050781v-241.832031h-294zm0 0"
          />
          <path
            d="m273.160156 254.917969c0 9.476562-7.683594 17.160156-17.160156 
        17.160156s-17.160156-7.683594-17.160156-17.160156c0-9.480469 7.683594-17.160157 17.160156-17.160157s17.160156 7.679688 17.160156 17.160157zm0 0"
          />
          <path
            d="m204.515625 254.917969c0 9.476562-7.683594 17.160156-17.160156 17.160156-9.476563 0-17.160157-7.683594-17.160157-17.160156 0-9.480469 
        7.683594-17.160157 17.160157-17.160157 9.476562 0 17.160156 7.679688 17.160156 17.160157zm0 0"
          />
          <path
            d="m341.804688 254.917969c0 9.476562-7.683594 
        17.160156-17.160157 17.160156-9.476562 0-17.160156-7.683594-17.160156-17.160156 0-9.480469 7.683594-17.160157 17.160156-17.160157 9.476563 0 17.160157 
        7.679688 17.160157 17.160157zm0 0"
          />
        </g>
      </svg>
      <svg
        v-if="data.type == 32"
        class="badge-icon newpost"
        viewBox="0 0 512 512"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <path
          d="m512 256c0 141.386719-114.613281 256-256 256s-256-114.613281-256-256 114.613281-256 256-256 256 114.613281 256 256zm0 0"
          fill="url(#a)"
        />
        <g fill="#fff">
          <path
            d="m391.191406 157.804688c-.0625-3.867188-1.644531-7.640626-4.382812-10.378907l-72.035156-72.03125c-2.785157-2.789062-6.664063-4.394531-10.605469-4.394531h-168.371094c-8.28125
            0-15 6.714844-15 15v340c0 8.285156 6.71875 15 15 15h240.40625c8.28125 0 15-6.714844 15-15v-267.964844c0-.078125-.011719-.15625-.011719-.230468zm-72.023437-35.589844 
            20.820312 20.820312h-20.820312zm-168.371094 288.785156v-310h138.371094v57.035156c0 8.28125 6.714843 15 15 15h57.035156v237.964844zm0 0"
          />
          <path
            d="m308.949219 204.179688c-5.855469-5.859376-15.355469-5.859376-21.210938 0l-119.578125 119.574218c-2.8125 2.8125-4.394531 6.628906-4.394531 
            10.605469v34.890625c0 8.28125 6.71875 15 15 15h34.890625c3.976562 0 7.792969-1.582031 10.605469-4.394531l119.578125-119.574219c2.8125-2.8125 4.394531-6.628906 
            4.394531-10.605469 0-3.980469-1.582031-7.792969-4.394531-10.609375zm-101.507813 150.070312h-13.675781v-13.675781l104.578125-104.578125 13.675781 13.679687zm0 0"
          />
        </g>
      </svg>
    </div>
    <div class="profile-image">
      <img :src="data.profile" v-if="data.profile" />
      <svg
        v-else
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 26 26"
      >
        <path
          d="M13,1C6.4,1,1,6.4,1,13s5.4,12,12,12s12-5.4,12-12S19.6,1,13,1z M13,4.6c2,0,3.6,1.6,3.6,3.6S15,11.8,13,11.8
            s-3.6-1.6-3.6-3.6S11,4.6,13,4.6z M13,21.6c-3,0-5.7-1.5-7.2-3.9c0-2.4,4.8-3.7,7.2-3.7c2.4,0,7.2,1.3,7.2,3.7
            C18.7,20.1,16,21.6,13,21.6z"
        />
      </svg>
    </div>
    <div class="notification-msg">{{ data.message }}</div>
  </div>
</template>

<script>
import axios from "axios";
import { mapGetters } from "vuex";
const SERVER_URL = "http://i3a604.p.ssafy.io:8081";

export default {
  props: {
    data: {}
  },
  methods: {
    ...mapGetters({
      getEmail: "user/getEmail"
    }),
    moveUrl() {
      document.querySelector(".container-notification").classList.add("hide");
      axios
        .get(`${SERVER_URL}/api/notification/updateIsread`, {
          params: {
            id: this.data.id
          },
          withCredentials: true
        })
        .then(() => {
          if (this.data.type == 16) {
            this.$router.push({
              name: "Blog",
              params: { email: this.data.actionuser }
            });
          } else {
            this.$router.push({
              name: "ArticleView",
              query: { id: this.data.postid }
            });
          }
        })
        .catch(err => {
          console.log(err);
        });
    }
  }
};
</script>
<style lang="scss" scoped>
.sub-notification {
  flex-direction: column;
  height: 40px;
  font-size: 12px;
  margin: auto;
  padding: 5px;
  display: table;
  cursor: pointer;
  .profile-image {
    img {
      object-fit: cover;
    }
  }
}

svg,
img {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  fill: gray;
  margin-right: 15px;
}

.notification-msg {
  max-width: 210px;
  min-width: 210px;
  display: table-cell;
  vertical-align: middle;

  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 6px;
  padding: 5px;
}

.badge {
  position: relative;
}

.badge-icon {
  position: absolute;
  width: 18px;
  height: 18px;
  background: cornflowerblue;
  cursor: default;
  border-radius: 50%;
  top: 18px;
  right: -2px;
}
</style>
